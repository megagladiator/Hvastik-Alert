(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{3909:function(e,r,s){Promise.resolve().then(s.bind(s,8739))},8739:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return b}});var t=s(7437),a=s(2265),n=s(2141),l=s(6070),i=s(2869),o=s(5974),d=s(535),c=s(4508);let u=(0,d.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=a.forwardRef((e,r)=>{let{className:s,variant:a,...n}=e;return(0,t.jsx)("div",{ref:r,role:"alert",className:(0,c.cn)(u({variant:a}),s),...n})});f.displayName="Alert",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h5",{ref:r,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})}).displayName="AlertTitle";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",s),...a})});m.displayName="AlertDescription";var x=s(8977);let p=x.fC,g=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(x.aV,{ref:r,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});g.displayName=x.aV.displayName;let h=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(x.xz,{ref:r,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});h.displayName=x.xz.displayName;let v=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(x.VY,{ref:r,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});function b(){let[e,r]=(0,a.useState)([]),[s,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),x=["pets","messages","app_settings"],b=async()=>{d(!0);let e=[];for(let r of x)try{let{data:s,error:t}=await n.O.from(r).select("*").limit(10);if(t)e.push({name:r,columns:[],rowCount:0,sampleData:[],error:t.message});else{let t=s&&s.length>0?Object.keys(s[0]).map(e=>({name:e,type:typeof s[0][e],sampleValue:s[0][e]})):[],{count:a}=await n.O.from(r).select("*",{count:"exact",head:!0});e.push({name:r,columns:t,rowCount:a||0,sampleData:s||[]})}}catch(s){e.push({name:r,columns:[],rowCount:0,sampleData:[],error:s.message})}r(e),u(new Date().toLocaleString()),d(!1)};(0,a.useEffect)(()=>{b()},[]);let j=e=>e.error?{status:"error",color:"bg-red-100 text-red-800"}:0===e.rowCount?{status:"empty",color:"bg-yellow-100 text-yellow-800"}:{status:"ok",color:"bg-green-100 text-green-800"},y=e=>e.error?"❌":0===e.rowCount?"⚠️":"✅";return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-8",children:(0,t.jsx)("div",{className:"container mx-auto max-w-6xl",children:(0,t.jsxs)(l.Zb,{className:"mb-6",children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:["\uD83D\uDDC4️ Структура базы данных Supabase",(0,t.jsx)(o.C,{variant:"outline",children:"Анализ таблиц"})]})}),(0,t.jsxs)(l.aY,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsx)(i.z,{onClick:b,disabled:s,children:s?"Проверяем...":"\uD83D\uDD04 Обновить"}),c&&(0,t.jsxs)(o.C,{variant:"outline",children:["Обновлено: ",c]})]}),(0,t.jsxs)(p,{defaultValue:"overview",className:"w-full",children:[(0,t.jsxs)(g,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(h,{value:"overview",children:"Обзор"}),(0,t.jsx)(h,{value:"structure",children:"Структура"}),(0,t.jsx)(h,{value:"data",children:"Данные"})]}),(0,t.jsx)(v,{value:"overview",className:"space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map((e,r)=>{let s=j(e);return(0,t.jsxs)(l.Zb,{className:"border-l-4 ".concat(s.color),children:[(0,t.jsx)(l.Ol,{className:"pb-2",children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2 text-lg",children:[y(e)," ",e.name]})}),(0,t.jsx)(l.aY,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Записей:"}),(0,t.jsx)(o.C,{variant:"outline",children:e.rowCount})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Колонок:"}),(0,t.jsx)(o.C,{variant:"outline",children:e.columns.length})]}),e.error&&(0,t.jsx)(f,{children:(0,t.jsx)(m,{className:"text-sm",children:e.error})})]})})]},r)})})}),(0,t.jsx)(v,{value:"structure",className:"space-y-4",children:e.map((e,r)=>(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[y(e)," Таблица: ",e.name,(0,t.jsxs)(o.C,{variant:"outline",children:[e.columns.length," колонок"]})]})}),(0,t.jsx)(l.aY,{children:e.error?(0,t.jsx)(f,{children:(0,t.jsx)(m,{children:e.error})}):0===e.columns.length?(0,t.jsx)(f,{children:(0,t.jsx)(m,{children:"Таблица пуста или недоступна"})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Колонка"}),(0,t.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Тип"}),(0,t.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Пример значения"})]})}),(0,t.jsx)("tbody",{children:e.columns.map((e,r)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-mono",children:e.name}),(0,t.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,t.jsx)(o.C,{variant:"secondary",children:e.type})}),(0,t.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,t.jsx)("code",{className:"text-sm bg-gray-100 px-1 rounded",children:null!==e.sampleValue?JSON.stringify(e.sampleValue).substring(0,50):"null"})})]},r))})]})})})]},r))}),(0,t.jsx)(v,{value:"data",className:"space-y-4",children:e.map((e,r)=>(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[y(e)," Данные: ",e.name,(0,t.jsxs)(o.C,{variant:"outline",children:[e.sampleData.length," из ",e.rowCount," записей"]})]})}),(0,t.jsx)(l.aY,{children:e.error?(0,t.jsx)(f,{children:(0,t.jsx)(m,{children:e.error})}):0===e.sampleData.length?(0,t.jsx)(f,{children:(0,t.jsx)(m,{children:"Нет данных для отображения"})}):(0,t.jsx)("div",{className:"space-y-4",children:e.sampleData.map((e,r)=>(0,t.jsx)(l.Zb,{className:"bg-gray-50",children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,t.jsxs)(o.C,{variant:"outline",children:["Запись ",r+1]})}),(0,t.jsx)("pre",{className:"text-sm overflow-auto bg-white p-3 rounded border",children:JSON.stringify(e,null,2)})]})},r))})})]},r))})]})]})]})})})}v.displayName=x.VY.displayName},5974:function(e,r,s){"use strict";s.d(r,{C:function(){return i}});var t=s(7437);s(2265);var a=s(535),n=s(4508);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)(l({variant:s}),r),...a})}},2869:function(e,r,s){"use strict";s.d(r,{d:function(){return o},z:function(){return d}});var t=s(7437),a=s(2265),n=s(7053),l=s(535),i=s(4508);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:s,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,t.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:r,...c})});d.displayName="Button"},6070:function(e,r,s){"use strict";s.d(r,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var t=s(7437),a=s(2265),n=s(4508);let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},2141:function(e,r,s){"use strict";s.d(r,{O:function(){return n},e:function(){return l}});var t=s(6580);let a="https://erjszhoaxapnkluezwpy.supabase.co",n=a.includes("placeholder")?null:(0,t.eI)(a,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyanN6aG9heGFwbmtsdWV6d3B5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTg2MjUsImV4cCI6MjA3MTk3NDYyNX0.IvgGGZDzq-7YJZAGWBeqcyR5BL1fc6zBrhMa1qiE5Rs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"Content-Type":"application/json; charset=utf-8"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),l=n||{from:()=>({select:()=>({eq:()=>({order:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),single:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})}),insert:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})}),update:()=>({eq:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})})}),storage:{from:()=>({upload:()=>Promise.resolve({data:null,error:Error("Supabase Storage not configured")}),getPublicUrl:()=>({data:{publicUrl:"/placeholder.svg"}})})}}},4508:function(e,r,s){"use strict";s.d(r,{cn:function(){return n}});var t=s(1994),a=s(3335);function n(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.m6)((0,t.W)(r))}s(257)}},function(e){e.O(0,[580,432,635,977,971,117,744],function(){return e(e.s=3909)}),_N_E=e.O()}]);