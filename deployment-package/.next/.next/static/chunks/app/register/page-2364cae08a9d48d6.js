(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{9025:function(e,r,t){Promise.resolve().then(t.bind(t,1288))},1288:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var n=t(7437),s=t(2265),o=t(2141),a=t(9376);function i(){let[e,r]=(0,s.useState)(""),[t,i]=(0,s.useState)(""),[u,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),[h,g]=(0,s.useState)(!1),p=(0,a.useRouter)(),b=async r=>{if(r.preventDefault(),d(""),t!==u){d("Пароли не совпадают");return}if(t.length<6){d("Пароль должен содержать минимум 6 символов");return}if(!o.O){d("Система регистрации недоступна");return}f(!0);try{let{data:r,error:n}=await o.O.auth.signUp({email:e,password:t,options:{emailRedirectTo:function(e,r){let t=window.location.origin;return"".concat(t).concat(e)}("/auth/verify-email"),data:{email_confirm:!1}}});if(n){console.error("Ошибка регистрации:",n),n.message.includes("already registered")||n.message.includes("User already registered")?d("Пользователь с таким email уже существует"):n.message.includes("Invalid email")?d("Неверный формат email"):n.message.includes("Password should be at least")?d("Пароль слишком слабый"):n.message.includes("rate limit")||n.message.includes("Too many requests")?d("Слишком много запросов. Попробуйте позже"):d("Ошибка при регистрации");return}console.log("Пользователь создан:",r.user),console.log("Письмо подтверждения отправлено на:",e),g(!0),d("")}catch(e){console.error("Ошибка регистрации:",e),d("Ошибка при регистрации")}finally{f(!1)}};return(0,n.jsxs)("div",{className:"max-w-md w-full mx-auto mt-10 p-6 bg-gradient-to-br from-green-50 to-emerald-100 rounded-lg shadow-lg border-2 border-green-200",children:[(0,n.jsxs)("div",{className:"text-center mb-4",children:[(0,n.jsx)("div",{className:"text-green-600 text-2xl mb-2",children:"\uD83D\uDCDD"}),(0,n.jsx)("h2",{className:"text-xl font-bold text-green-800",children:"Регистрация через Supabase"}),(0,n.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Создание нового аккаунта"})]}),(0,n.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,n.jsx)("input",{type:"email",placeholder:"E-mail",value:e,onChange:e=>r(e.target.value),required:!0,className:"w-full border-2 border-green-200 rounded-lg px-4 py-3 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors",disabled:m}),(0,n.jsx)("input",{type:"password",placeholder:"Пароль (минимум 6 символов)",value:t,onChange:e=>i(e.target.value),required:!0,className:"w-full border-2 border-green-200 rounded-lg px-4 py-3 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors",disabled:m}),(0,n.jsx)("input",{type:"password",placeholder:"Повторите пароль",value:u,onChange:e=>l(e.target.value),required:!0,className:"w-full border-2 border-green-200 rounded-lg px-4 py-3 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-colors",disabled:m}),c&&(0,n.jsxs)("div",{className:"text-red-500 text-sm p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,n.jsx)("div",{className:"font-medium mb-1",children:"Ошибка:"}),(0,n.jsx)("div",{children:c}),c.includes("Слишком много запросов")&&(0,n.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:[(0,n.jsx)("p",{children:"Попробуйте снова через час."}),(0,n.jsx)("p",{children:"Это защита от спама."})]})]}),h&&(0,n.jsxs)("div",{className:"text-green-600 text-sm p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,n.jsx)("div",{className:"font-medium mb-2",children:"✅ Регистрация успешна!"}),(0,n.jsx)("div",{children:"На ваш email отправлено письмо с подтверждением."}),(0,n.jsx)("div",{className:"mt-2 text-xs",children:"\uD83D\uDCA1 Проверьте почту и перейдите по ссылке для подтверждения. После подтверждения вы сможете войти в систему."}),(0,n.jsx)("button",{type:"button",onClick:()=>p.push("/auth"),className:"mt-3 w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded text-sm",children:"Перейти к входу"})]}),!h&&(0,n.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",disabled:m,children:m?"Регистрация...":"Зарегистрироваться в Supabase"}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("a",{href:"/auth",className:"text-green-600 hover:text-green-800 underline font-medium",children:"Уже есть аккаунт? Войти"})})]})]})}t(257)},2141:function(e,r,t){"use strict";t.d(r,{O:function(){return o},e:function(){return a}});var n=t(6580);let s="https://erjszhoaxapnkluezwpy.supabase.co",o=s.includes("placeholder")?null:(0,n.eI)(s,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyanN6aG9heGFwbmtsdWV6d3B5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTg2MjUsImV4cCI6MjA3MTk3NDYyNX0.IvgGGZDzq-7YJZAGWBeqcyR5BL1fc6zBrhMa1qiE5Rs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"Content-Type":"application/json; charset=utf-8"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),a=o||{from:()=>({select:()=>({eq:()=>({order:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),single:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})}),insert:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})}),update:()=>({eq:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})})}),storage:{from:()=>({upload:()=>Promise.resolve({data:null,error:Error("Supabase Storage not configured")}),getPublicUrl:()=>({data:{publicUrl:"/placeholder.svg"}})})}}},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,r,t){"use strict";var n,s;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(4227)},4227:function(e){!function(){var r={229:function(e){var r,t,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{t="function"==typeof clearTimeout?clearTimeout:a}catch(e){t=a}}();var u=[],l=!1,c=-1;function d(){l&&n&&(l=!1,n.length?u=n.concat(u):c=-1,u.length&&m())}function m(){if(!l){var e=i(d);l=!0;for(var r=u.length;r;){for(n=u,u=[];++c<r;)n&&n[c].run();c=-1,r=u.length}n=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function f(e,r){this.fun=e,this.array=r}function h(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];u.push(new f(e,r)),1!==u.length||l||i(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}},a=!0;try{r[e](o,o.exports,n),a=!1}finally{a&&delete t[e]}return o.exports}n.ab="//";var s=n(229);e.exports=s}()}},function(e){e.O(0,[580,971,117,744],function(){return e(e.s=9025)}),_N_E=e.O()}]);