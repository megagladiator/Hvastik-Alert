(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{4104:function(e,t,a){Promise.resolve().then(a.bind(a,6034))},6034:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=a(7437),l=a(2265),r=a(2869),n=a(5186),i=a(6070),c=a(5974),o=a(3647),d=a(2660),h=a(8997),m=a(9397),u=a(3247),x=a(3774),p=a(1047),f=a(2718),g=a(7648),j=a(6397),b=a(2141);function N(){let[e,t]=(0,l.useState)([]),[a,N]=(0,l.useState)([]),[y,v]=(0,l.useState)(""),[w,_]=(0,l.useState)("all"),[Z,k]=(0,l.useState)("all"),[C,z]=(0,l.useState)(!0);(0,l.useEffect)(()=>{D()},[]),(0,l.useEffect)(()=>{S()},[e,y,w,Z]);let D=async()=>{try{if(console.log("\uD83D\uDD0D Проверяем настройки Supabase..."),console.log("\uD83D\uDD0D supabase:",!!b.O),console.log("\uD83D\uDD0D NEXT_PUBLIC_SUPABASE_URL:","https://erjszhoaxapnkluezwpy.supabase.co"),b.O&&!"https://erjszhoaxapnkluezwpy.supabase.co".includes("placeholder")){let e=new Promise((e,t)=>setTimeout(()=>t(Error("Supabase timeout")),5e3)),a=b.O.from("pets").select("*").eq("status","active").order("created_at",{ascending:!1});try{let{data:s,error:l}=await Promise.race([a,e]);if(l)console.warn("Supabase error, using demo data:",l.message);else if(s&&s.length>0){console.log("✅ Загружены реальные данные из Supabase:",s.length,"объявлений"),t(s);return}else console.log("⚠️ Supabase вернул пустой результат, используем демо-данные")}catch(e){console.warn("Supabase timeout, using demo data")}}console.log("Using demo data - Supabase not configured or no data found"),t([{id:"1",type:"lost",animal_type:"dog",breed:"Лабрадор",name:"Рекс",description:"Дружелюбный золотистый лабрадор, очень активный. Потерялся в районе центрального пляжа.",color:"Золотистый",location:"Центральный пляж, Анапа",latitude:44.89,longitude:37.32,contact_phone:"+7 (918) 123-45-67",contact_name:"Анна",reward:5e3,photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-15T10:00:00Z",status:"active"},{id:"2",type:"found",animal_type:"cat",breed:"Беспородная",name:"Неизвестно",description:"Найден серый кот с белыми лапками. Очень ласковый, ухоженный.",color:"Серый с белым",location:"Парк 30-летия Победы",latitude:44.8876,longitude:37.3086,contact_phone:"+7 (918) 987-65-43",contact_name:"Михаил",photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-14T15:30:00Z",status:"active"},{id:"3",type:"lost",animal_type:"cat",breed:"Персидская",name:"Мурка",description:"Пушистая персидская кошка, белого цвета. Очень пугливая.",color:"Белый",location:"Высокий берег",latitude:44.8845,longitude:37.3234,contact_phone:"+7 (918) 555-12-34",contact_name:"Елена",reward:3e3,photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-13T09:15:00Z",status:"active"},{id:"4",type:"found",animal_type:"dog",breed:"Дворняжка",name:"Неизвестно",description:"Найдена небольшая собачка рыжего цвета возле автовокзала. Очень дружелюбная.",color:"Рыжий",location:"Автовокзал Анапы",latitude:44.8978,longitude:37.3167,contact_phone:"+7 (918) 777-88-99",contact_name:"Дмитрий",photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-12T12:00:00Z",status:"active"},{id:"5",type:"lost",animal_type:"dog",breed:"Хаски",name:"Балто",description:"Сибирский хаски, очень активный и дружелюбный. Потерялся во время прогулки в лесопарке.",color:"Черно-белый",location:"Лесопарк Большой Утриш",latitude:44.7289,longitude:37.4089,contact_phone:"+7 (918) 333-22-11",contact_name:"Игорь",reward:8e3,photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-11T16:45:00Z",status:"active"},{id:"6",type:"lost",animal_type:"cat",breed:"Британская",name:"Мурзик",description:"Серый британский кот, очень спокойный. Потерялся в станице Гостагаевская.",color:"Серый",location:"Гостагаевская",latitude:44.8951,longitude:37.3142,contact_phone:"+7 (918) 111-22-33",contact_name:"Мария",reward:2e3,photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-10T14:20:00Z",status:"active"}])}catch(e){console.warn("Unexpected error fetching pets, using demo data:",e),t([{id:"1",type:"lost",animal_type:"dog",breed:"Лабрадор",name:"Рекс",description:"Дружелюбный золотистый лабрадор, очень активный. Потерялся в районе центрального пляжа.",color:"Золотистый",location:"Центральный пляж, Анапа",latitude:44.89,longitude:37.32,contact_phone:"+7 (918) 123-45-67",contact_name:"Анна",reward:5e3,photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-15T10:00:00Z",status:"active"},{id:"2",type:"found",animal_type:"cat",breed:"Беспородная",name:"Неизвестно",description:"Найден серый кот с белыми лапками. Очень ласковый, ухоженный.",color:"Серый с белым",location:"Парк 30-летия Победы",latitude:44.8876,longitude:37.3086,contact_phone:"+7 (918) 987-65-43",contact_name:"Михаил",photo_url:"/placeholder.svg?height=200&width=300",created_at:"2024-01-14T15:30:00Z",status:"active"}])}finally{z(!1)}},S=()=>{let t=e;y&&(t=t.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())||e.breed.toLowerCase().includes(y.toLowerCase())||e.description.toLowerCase().includes(y.toLowerCase())||e.location.toLowerCase().includes(y.toLowerCase()))),"all"!==w&&(t=t.filter(e=>e.type===w)),"all"!==Z&&(t=t.filter(e=>e.animal_type===Z)),N(t)},L=e=>new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return C?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Загружаем объявления..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-orange-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(g.default,{href:"/",children:(0,s.jsxs)(r.z,{variant:"ghost",size:"sm",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"На главную"]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h.Z,{className:"h-6 w-6 text-orange-500"}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Поиск питомцев"})]})]}),(0,s.jsx)(g.default,{href:"/add",children:(0,s.jsxs)(r.z,{className:"bg-orange-500 hover:bg-orange-600",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Подать объявление"]})})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,s.jsx)("div",{className:"mb-6 space-y-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(n.I,{placeholder:"Поиск по кличке, породе, описанию...",value:y,onChange:e=>v(e.target.value),className:"pl-10"})]}),(0,s.jsxs)(o.Ph,{value:w,onValueChange:_,children:[(0,s.jsx)(o.i4,{className:"w-full md:w-48",children:(0,s.jsx)(o.ki,{placeholder:"Тип объявления"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"Все объявления"}),(0,s.jsx)(o.Ql,{value:"lost",children:"Потерялся"}),(0,s.jsx)(o.Ql,{value:"found",children:"Найден"})]})]}),(0,s.jsxs)(o.Ph,{value:Z,onValueChange:k,children:[(0,s.jsx)(o.i4,{className:"w-full md:w-48",children:(0,s.jsx)(o.ki,{placeholder:"Вид животного"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"Все животные"}),(0,s.jsx)(o.Ql,{value:"dog",children:"Собаки"}),(0,s.jsx)(o.Ql,{value:"cat",children:"Кошки"}),(0,s.jsx)(o.Ql,{value:"other",children:"Другие"})]})]})]})}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(i.Zb,{className:"h-96 lg:h-[600px]",children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)(i.ll,{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 mr-2 text-orange-500"}),"Карта объявлений"]})}),(0,s.jsx)(i.aY,{className:"p-0 h-full",children:(0,s.jsx)(j.t,{pets:a})})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Объявления (",a.length,")"]}),0===a.length?(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Объявления не найдены"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Попробуйте изменить фильтры поиска"})]})}):(0,s.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto",children:a.map(e=>(0,s.jsx)(i.Zb,{className:"hover:shadow-md transition-shadow cursor-pointer group",children:(0,s.jsx)(g.default,{href:"/pet/".concat(e.id),className:"block",children:(0,s.jsx)(i.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("img",{src:e.photo_url||"/placeholder.svg?height=80&width=80",alt:e.name,className:"w-20 h-20 rounded-lg object-cover group-hover:scale-105 transition-transform duration-300"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(c.C,{variant:"lost"===e.type?"destructive":"default",className:"lost"===e.type?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:"lost"===e.type?"Потерялся":"Найден"}),e.reward&&(0,s.jsxs)(c.C,{variant:"outline",className:"ml-2 text-orange-600 border-orange-200",children:[e.reward.toLocaleString()," ₽"]})]})}),(0,s.jsxs)("h3",{className:"font-semibold text-gray-900 mb-1 group-hover:text-orange-600 transition-colors",children:[e.name," • ",e.breed]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[(0,s.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),(0,s.jsx)("span",{className:"truncate",children:e.location})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,s.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),L(e.created_at)]}),(0,s.jsxs)("div",{className:"flex gap-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(g.default,{href:"/pet/".concat(e.id),children:(0,s.jsx)(r.z,{size:"sm",variant:"outline",children:"Подробнее"})}),(0,s.jsx)(g.default,{href:"/chat/".concat(e.id),children:(0,s.jsxs)(r.z,{size:"sm",className:"bg-orange-500 hover:bg-orange-600",children:[(0,s.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"Чат"]})})]})]})]})]})})})},e.id))})]})]}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-500",children:e.filter(e=>"lost"===e.type).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Потерялись"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-500",children:e.filter(e=>"found"===e.type).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Найдены"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-500",children:e.filter(e=>"dog"===e.animal_type).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Собаки"})]})}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-500",children:e.filter(e=>"cat"===e.animal_type).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Кошки"})]})})]})]})]})}},5186:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var s=a(7437),l=a(2265),r=a(4508);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},3647:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return f},i4:function(){return m},ki:function(){return h}});var s=a(7437),l=a(2265),r=a(5377),n=a(875),i=a(2135),c=a(401),o=a(4508);let d=r.fC;r.ZA;let h=r.B4,m=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(r.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,s.jsx)(r.JO,{asChild:!0,children:(0,s.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});u.displayName=r.u_.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.$G.displayName;let p=l.forwardRef((e,t)=>{let{className:a,children:l,position:n="popper",...i}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsxs)(r.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(u,{}),(0,s.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(x,{})]})})});p.displayName=r.VY.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.__.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,...n}=e;return(0,s.jsxs)(r.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.wU,{children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(r.eT,{children:l})]})});f.displayName=r.ck.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.Z0.displayName},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},function(e){e.O(0,[580,432,972,635,160,763,971,117,744],function(){return e(e.s=4104)}),_N_E=e.O()}]);