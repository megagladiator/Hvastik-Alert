(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{3563:function(e,t,r){Promise.resolve().then(r.bind(r,6998))},6998:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),s=r(2265),a=r(9376),o=r(1817),i=r(7648);function l(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),[r,l]=(0,s.useState)("loading"),[c,u]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=t.get("mode"),r=t.get("oobCode");console.log("Supabase Action Page:",{mode:e,oobCode:r,continueUrl:t.get("continueUrl")}),"verifyEmail"===e&&r?m(r):(l("error"),u("Неверная ссылка для подтверждения email."))},[t]);let m=async t=>{try{let r=await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}),n=await r.json();r.ok?(l("success"),u("Ваш email успешно подтвержден! Теперь вы можете войти в систему."),setTimeout(()=>{e.push("/auth")},3e3)):(l("error"),u(n.error||"Ошибка подтверждения email."))}catch(e){console.error("Error verifying email:",e),l("error"),u("Ошибка подтверждения email. Попробуйте позже.")}};return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-64px)] bg-gray-50 p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-8 text-center",children:["loading"===r&&(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(o.Z,{className:"h-10 w-10 animate-spin text-orange-500 mb-4"}),(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Подтверждение email..."}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Пожалуйста, подождите."})]}),"success"===r&&(0,n.jsxs)("div",{className:"text-green-600",children:[(0,n.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mt-4",children:"Email подтвержден!"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:c}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Перенаправление на страницу входа..."}),(0,n.jsx)(i.default,{href:"/auth",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Перейти к входу"})]}),"error"===r&&(0,n.jsxs)("div",{className:"text-red-600",children:[(0,n.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mt-4",children:"Ошибка подтверждения"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:c}),(0,n.jsx)(i.default,{href:"/auth",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Повторить вход"})]})]})})}},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:m,...d}=e;return(0,n.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:l?24*Number(i)/Number(s):i,className:a("lucide",c),...d},[...m.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,n.createElement)(i,{ref:o,iconNode:t,className:a("lucide-".concat(s(e)),l),...c})});return r.displayName="".concat(e),r}},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(2972),s=r.n(n)},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=3563)}),_N_E=e.O()}]);