"use strict";(()=>{var e={};e.id=3591,e.ids=[3591],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},76540:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>c});var r={};o.r(r),o.d(r,{GET:()=>i});var s=o(73278),n=o(45002),u=o(54877),a=o(71309);async function i(e){try{let{searchParams:t}=new URL(e.url),o=t.get("address");if(!o)return a.NextResponse.json({error:"Адрес не указан"},{status:400});console.log("\uD83D\uDD0D API геокодирования для адреса:",o);let r=o.trim().replace(/\s+/g," "),s=!1,n=null,u="";for(let e of[r,`${r}, Краснодарский край, Россия`,`${r}, Россия`,`станица ${r}, Краснодарский край, Россия`,`село ${r}, Краснодарский край, Россия`,`хутор ${r}, Краснодарский край, Россия`,`поселок ${r}, Краснодарский край, Россия`]){if(s)break;try{let t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&limit=1&addressdetails=1&countrycodes=ru`,o=await fetch(t);if(!o.ok)continue;let r=await o.json();if(r&&r.length>0){let e=r[0];n={latitude:parseFloat(e.lat),longitude:parseFloat(e.lon)},u=e.display_name,s=!0;break}}catch(e){continue}}if(!s){let e=r.toLowerCase();e.includes("гостагаевская")?(n={latitude:45.02063,longitude:37.50175},u="Гостагаевская"):e.includes("варениковская")?(n={latitude:45.12085,longitude:37.64171},u="Варениковская"):e.includes("натухаевская")?(n={latitude:45,longitude:37.6},u="Натухаевская"):e.includes("новороссийск")?(n={latitude:44.7239,longitude:37.7708},u="Новороссийск"):e.includes("анапа")?(n={latitude:44.8951,longitude:37.3142},u="Анапа"):e.includes("краснодар")?(n={latitude:45.0448,longitude:38.976},u="Краснодар"):e.includes("сочи")?(n={latitude:43.5855,longitude:39.7231},u="Сочи"):e.includes("геленджик")&&(n={latitude:44.5622,longitude:38.0768},u="Геленджик")}if(n)return a.NextResponse.json({success:!0,address:o,location:u,latitude:n.latitude,longitude:n.longitude,found:s});return a.NextResponse.json({success:!1,error:"Адрес не найден",address:o},{status:404})}catch(e){return console.error("❌ Ошибка геокодирования:",e),a.NextResponse.json({success:!1,error:"Внутренняя ошибка сервера"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api-backup/geocode/route",pathname:"/api-backup/geocode",filename:"route",bundlePath:"app/api-backup/geocode/route"},resolvedPagePath:"D:\\DATA\\Hvastik-Alert\\app\\api-backup\\geocode\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:p}=d,g="/api-backup/geocode/route";function m(){return(0,u.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:c})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[7787,4833],()=>o(76540));module.exports=r})();