(()=>{var e={};e.id=2819,e.ids=[2819],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},47637:(e,r,s)=>{"use strict";s.r(r),s.d(r,{originalPathname:()=>x,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var t={};s.r(t),s.d(t,{POST:()=>p});var o=s(73278),a=s(45002),u=s(54877),i=s(71309),n=s(1482);async function p(e){try{let{accessToken:r,refreshToken:s,newPassword:t}=await e.json();if(!r||!s||!t)return i.NextResponse.json({error:"Токены доступа и новый пароль обязательны"},{status:400});if(t.length<6)return i.NextResponse.json({error:"Пароль должен содержать минимум 6 символов"},{status:400});if(!n.O)return i.NextResponse.json({error:"Supabase not initialized"},{status:500});let{error:o}=await n.O.auth.setSession({access_token:r,refresh_token:s});if(o)return console.error("Error setting session:",o),i.NextResponse.json({error:"Ссылка для сброса пароля недействительна или истекла"},{status:400});let{error:a}=await n.O.auth.updateUser({password:t});if(a){if(console.error("Error updating password:",a),a.message.includes("Password should be at least"))return i.NextResponse.json({error:"Пароль слишком слабый. Используйте более сложный пароль"},{status:400});return i.NextResponse.json({error:"Произошла ошибка при обновлении пароля",details:a.message},{status:500})}return i.NextResponse.json({message:"Пароль успешно обновлен",success:!0})}catch(e){return console.error("Error in reset password API:",e),i.NextResponse.json({error:"Произошла ошибка при сбросе пароля",details:e.message},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api-backup/auth/reset-password/route",pathname:"/api-backup/auth/reset-password",filename:"route",bundlePath:"app/api-backup/auth/reset-password/route"},resolvedPagePath:"D:\\DATA\\Hvastik-Alert\\app\\api-backup\\auth\\reset-password\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=c,x="/api-backup/auth/reset-password/route";function m(){return(0,u.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},1482:(e,r,s)=>{"use strict";s.d(r,{O:()=>a});var t=s(52418);let o="https://erjszhoaxapnkluezwpy.supabase.co",a=o.includes("placeholder")?null:(0,t.eI)(o,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyanN6aG9heGFwbmtsdWV6d3B5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTg2MjUsImV4cCI6MjA3MTk3NDYyNX0.IvgGGZDzq-7YJZAGWBeqcyR5BL1fc6zBrhMa1qiE5Rs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"Content-Type":"application/json; charset=utf-8"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}})}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[7787,4833,2418],()=>s(47637));module.exports=t})();