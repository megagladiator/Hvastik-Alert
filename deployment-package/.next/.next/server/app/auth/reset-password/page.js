(()=>{var e={};e.id=2048,e.ids=[2048],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},71095:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>x,tree:()=>o}),r(91738),r(13973),r(90996);var s=r(30170),a=r(45002),l=r(83876),n=r.n(l),i=r(66299),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["auth",{children:["reset-password",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,91738)),"D:\\DATA\\Hvastik-Alert\\app\\auth\\reset-password\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13973)),"D:\\DATA\\Hvastik-Alert\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,68199)),"D:\\DATA\\Hvastik-Alert\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"]}],u=["D:\\DATA\\Hvastik-Alert\\app\\auth\\reset-password\\page.tsx"],c="/auth/reset-password/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/reset-password/page",pathname:"/auth/reset-password",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},58038:(e,t,r)=>{Promise.resolve().then(r.bind(r,13749))},13749:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(97247),a=r(28964),l=r(34178),n=r(79906);function i(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),[u,c]=(0,a.useState)(""),[p,x]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),[g,b]=(0,a.useState)("");async function w(t){if(t.preventDefault(),c(""),e!==r){c("Пароли не совпадают");return}if(e.length<6){c("Пароль должен содержать минимум 6 символов");return}if(!h||!g){c("Отсутствуют токены для сброса пароля");return}o(!0);try{let t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:h,refreshToken:g,newPassword:e})}),r=await t.json();if(!t.ok){c(r.error||"Произошла ошибка при сбросе пароля");return}x(!0)}catch(e){c("Произошла ошибка при сбросе пароля")}o(!1)}return((0,l.useRouter)(),(0,l.useSearchParams)(),p)?s.jsx("div",{className:"max-w-md w-full mx-auto mt-10 p-6 bg-white rounded-lg shadow-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-green-600 text-4xl mb-4",children:"✓"}),s.jsx("h2",{className:"text-xl font-bold mb-4 text-green-600",children:"Пароль успешно изменен!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Ваш пароль был успешно обновлен. Теперь вы можете войти в систему с новым паролем."}),s.jsx(n.default,{href:"/auth",className:"block w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded text-center",children:"Войти в систему"})]})}):h&&g?(0,s.jsxs)("div",{className:"max-w-md w-full mx-auto mt-10 p-6 bg-white rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Установить новый пароль"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Введите новый пароль для вашего аккаунта"}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[s.jsx("input",{type:"password",placeholder:"Новый пароль",value:e,onChange:e=>t(e.target.value),required:!0,autoComplete:"new-password",name:"password",id:"password",className:"w-full border rounded px-3 py-2",disabled:d,minLength:6}),s.jsx("input",{type:"password",placeholder:"Подтвердите новый пароль",value:r,onChange:e=>i(e.target.value),required:!0,autoComplete:"new-password",name:"confirm-password",id:"confirm-password",className:"w-full border rounded px-3 py-2",disabled:d,minLength:6}),u&&(0,s.jsxs)("div",{className:"text-red-500 text-sm p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("div",{className:"font-medium mb-1",children:"Ошибка:"}),s.jsx("div",{children:u})]}),s.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:d,children:d?"Обновление...":"Установить новый пароль"}),s.jsx("div",{className:"text-center",children:s.jsx(n.default,{href:"/auth",className:"text-blue-600 underline",children:"Вернуться к входу"})})]})]}):s.jsx("div",{className:"max-w-md w-full mx-auto mt-10 p-6 bg-white rounded-lg shadow-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-4xl mb-4",children:"⚠"}),s.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:"Неверная ссылка"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Ссылка для сброса пароля недействительна или истекла."}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(n.default,{href:"/auth/forgot-password",className:"block w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded text-center",children:"Запросить новую ссылку"}),s.jsx(n.default,{href:"/auth",className:"block w-full bg-gray-500 hover:bg-gray-600 text-white py-2 rounded text-center",children:"Вернуться к входу"})]})]})})}},79906:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(34080),a=r.n(s)},91738:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`D:\DATA\Hvastik-Alert\app\auth\reset-password\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7787,1918,1086],()=>r(71095));module.exports=s})();