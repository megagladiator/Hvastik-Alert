"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5763],{6397:function(e,t,n){n.d(t,{t:function(){return i}});var r=n(7437),o=n(2265),a=n(3774);function i(e){let{pets:t}=e,n=(0,o.useRef)(null),i=(0,o.useRef)(null),s=(0,o.useRef)([]);return(0,o.useEffect)(()=>{let e=setTimeout(async()=>{try{if(!document.querySelector('link[href*="leaflet"]')){let e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",e.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",e.crossOrigin="",document.head.appendChild(e)}if(!window.L){let e=document.createElement("script");e.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",e.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",e.crossOrigin="",document.head.appendChild(e),await new Promise((t,n)=>{e.onload=t,e.onerror=n})}let e=window.L;if(!e){console.warn("Leaflet not loaded, skipping map initialization");return}delete e.Icon.Default.prototype._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"}),!i.current&&n.current&&(i.current=e.map(n.current).setView([44.89,37.32],11),e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors",maxZoom:19}).addTo(i.current)),s.current.forEach(e=>{i.current.removeLayer(e)}),s.current=[],console.log("\uD83D\uDDFA️ PetMap получил данные:",t.map(e=>({name:e.name,location:e.location,lat:e.latitude,lng:e.longitude}))),t.forEach((t,n)=>{let r=e.divIcon({html:'\n              <div style="\n                display: flex; \n                align-items: center; \n                justify-content: center; \n                width: 32px; \n                height: 32px; \n                border-radius: 50%; \n                background-color: '.concat("lost"===t.type?"#ef4444":"#22c55e",'; \n                color: white; \n                font-size: 16px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n                border: 2px solid white;\n              ">\n                ').concat("dog"===t.animal_type?"\uD83D\uDC15":"cat"===t.animal_type?"\uD83D\uDC31":"\uD83D\uDC3E","\n              </div>\n            "),className:"custom-marker",iconSize:[32,32],iconAnchor:[16,16]});console.log("\uD83D\uDDFA️ Создаем маркер для ".concat(t.name,": [").concat(t.latitude,", ").concat(t.longitude,"]"));let o=e.marker([t.latitude,t.longitude],{icon:r}).addTo(i.current).bindPopup('\n              <div style="padding: 8px; min-width: 200px;">\n                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">\n                  <span style="\n                    padding: 4px 8px; \n                    font-size: 12px; \n                    border-radius: 12px; \n                    background-color: '.concat("lost"===t.type?"#fef2f2":"#f0fdf4","; \n                    color: ").concat("lost"===t.type?"#dc2626":"#16a34a",';\n                  ">\n                    ').concat("lost"===t.type?"Потерялся":"Найден","\n                  </span>\n                  ").concat(t.reward?'<span style="padding: 4px 8px; font-size: 12px; background-color: #fff7ed; color: #ea580c; border-radius: 12px;">'.concat(t.reward.toLocaleString()," ₽</span>"):"",'\n                </div>\n                <h3 style="font-weight: 600; color: #111827; margin-bottom: 4px;">').concat(t.name," • ").concat(t.breed,'</h3>\n                <p style="font-size: 14px; color: #6b7280; margin-bottom: 8px;">').concat(t.description.substring(0,100)).concat(t.description.length>100?"...":"",'</p>\n                <p style="font-size: 12px; color: #9ca3af; margin-bottom: 8px;">\uD83D\uDCCD ').concat(t.location,'</p>\n                <div style="display: flex; gap: 8px;">\n                  <a href="/pet/').concat(t.id,'" style="\n                    padding: 6px 12px; \n                    font-size: 12px; \n                    background-color: #f3f4f6; \n                    color: #374151; \n                    border-radius: 4px; \n                    text-decoration: none;\n                  ">\n                    Подробнее\n                  </a>\n                  <a href="/chat/').concat(t.id,'" style="\n                    padding: 6px 12px; \n                    font-size: 12px; \n                    background-color: #f97316; \n                    color: white; \n                    border-radius: 4px; \n                    text-decoration: none;\n                  ">\n                    Написать\n                  </a>\n                </div>\n              </div>\n            '));s.current.push(o)}),console.log("\uD83D\uDDFA️ Маркеры добавлены, автоматическая подгонка отключена")}catch(e){console.error("Error loading Leaflet:",e)}},100);return()=>clearTimeout(e)},[t]),(0,r.jsxs)("div",{className:"relative w-full h-full",children:[(0,r.jsx)("div",{ref:n,className:"w-full h-full rounded-b-lg",style:{minHeight:"300px"}}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 bg-white p-3 rounded-lg shadow-md z-[1000]",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-2",children:"Легенда"}),(0,r.jsxs)("div",{className:"space-y-1 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:"\uD83D\uDC3E"}),(0,r.jsx)("span",{children:"Потерялся"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center text-white text-xs",children:"\uD83D\uDC3E"}),(0,r.jsx)("span",{children:"Найден"})]})]}),(0,r.jsx)("button",{onClick:()=>{i.current&&i.current.setView([44.89,37.32],11)},className:"w-full text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors",children:"Сброс"})]}),0===t.length&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 rounded-b-lg",children:(0,r.jsxs)("div",{className:"text-center text-gray-500",children:[(0,r.jsx)(a.Z,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,r.jsx)("p",{children:"Объявления не найдены"})]})})]})}t.Z=i},5974:function(e,t,n){n.d(t,{C:function(){return s}});var r=n(7437);n(2265);var o=n(535),a=n(4508);let i=(0,o.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:n,...o}=e;return(0,r.jsx)("div",{className:(0,a.cn)(i({variant:n}),t),...o})}},2869:function(e,t,n){n.d(t,{d:function(){return c},z:function(){return l}});var r=n(7437),o=n(2265),a=n(7053),i=n(535),s=n(4508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:n,variant:o,size:i,asChild:l=!1,...d}=e,u=l?a.g7:"button";return(0,r.jsx)(u,{className:(0,s.cn)(c({variant:o,size:i,className:n})),ref:t,...d})});l.displayName="Button"},6070:function(e,t,n){n.d(t,{Ol:function(){return s},Zb:function(){return i},aY:function(){return l},ll:function(){return c}});var r=n(7437),o=n(2265),a=n(4508);let i=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...o})});i.displayName="Card";let s=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...o})});s.displayName="CardHeader";let c=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...o})});c.displayName="CardTitle",o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...o})}).displayName="CardDescription";let l=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...o})});l.displayName="CardContent",o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...o})}).displayName="CardFooter"},2141:function(e,t,n){n.d(t,{O:function(){return a},e:function(){return i}});var r=n(6580);let o="https://erjszhoaxapnkluezwpy.supabase.co",a=o.includes("placeholder")?null:(0,r.eI)(o,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyanN6aG9heGFwbmtsdWV6d3B5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTg2MjUsImV4cCI6MjA3MTk3NDYyNX0.IvgGGZDzq-7YJZAGWBeqcyR5BL1fc6zBrhMa1qiE5Rs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"Content-Type":"application/json; charset=utf-8"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),i=a||{from:()=>({select:()=>({eq:()=>({order:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),single:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})}),insert:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})}),update:()=>({eq:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})})}),storage:{from:()=>({upload:()=>Promise.resolve({data:null,error:Error("Supabase Storage not configured")}),getPublicUrl:()=>({data:{publicUrl:"/placeholder.svg"}})})}}},4508:function(e,t,n){n.d(t,{cn:function(){return a}});var r=n(1994),o=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}n(257)},8997:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3774:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2718:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9397:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,n){n.d(t,{default:function(){return o.a}});var r=n(2972),o=n.n(r)}}]);