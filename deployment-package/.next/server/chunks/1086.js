exports.id=1086,exports.ids=[1086],exports.modules={58359:()=>{},93739:()=>{},65035:(e,t,r)=>{Promise.resolve().then(r.bind(r,15971)),Promise.resolve().then(r.bind(r,99636)),Promise.resolve().then(r.bind(r,30049)),Promise.resolve().then(r.bind(r,59827)),Promise.resolve().then(r.t.bind(r,34080,23))},18748:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63642,23)),Promise.resolve().then(r.t.bind(r,87586,23)),Promise.resolve().then(r.t.bind(r,47838,23)),Promise.resolve().then(r.t.bind(r,58057,23)),Promise.resolve().then(r.t.bind(r,77741,23)),Promise.resolve().then(r.t.bind(r,13118,23))},35303:()=>{},15971:(e,t,r)=>{"use strict";r.d(t,{NotificationProvider:()=>u});var s=r(97247),i=r(28964),a=r(38146),n=r(92448),l=r(37073),o=r(37013);function d({notifications:e,onClose:t,onChatClick:r}){let[a,n]=(0,i.useState)([]);return 0===a.length?null:s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 max-w-sm",children:a.map(e=>(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 border-2 border-blue-200 rounded-lg shadow-lg p-5 animate-in slide-in-from-right duration-300 hover:shadow-xl transition-all",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:"new_message"===e.type?s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:s.jsx(l.Z,{className:"h-4 w-4 text-white"})}):s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(l.Z,{className:"h-4 w-4 text-white"})})}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-blue-800",children:e.title}),s.jsx("p",{className:"text-xs text-blue-600",children:new Date(e.timestamp).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 text-blue-400 hover:text-blue-600 transition-colors p-1 rounded-full hover:bg-blue-100",children:s.jsx(o.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.message}),e.petName&&(0,s.jsxs)("p",{className:"text-xs text-blue-600 mt-2 font-medium",children:["\uD83D\uDC3E Питомец: ",e.petName]})]}),e.chatId&&r&&s.jsx("button",{onClick:()=>{r(e.chatId),t(e.id)},className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white py-2 px-4 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg text-sm",children:"Перейти к чату →"})]},e.id))})}var c=r(34178);function u(){let{session:e}=(0,a.B)(),t=(0,c.useRouter)(),[r,l]=(0,i.useState)(!0),{notifications:o,removeNotification:u,clearAllNotifications:m}=function({userId:e,isOnline:t}){let[r,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(null),o=()=>new Date().toDateString(),d=()=>null,c=e=>{};return(0,i.useCallback)(()=>{if(n.O&&e)return n.O.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async t=>{let r=t.new;if(r.sender_id!==e){let{data:t}=await n.O.from("chats").select(`
                *,
                pets!inner(
                  id,
                  name,
                  type
                )
              `).eq("id",r.chat_id).eq("status","active").single();if(t&&(t.user_id===e||t.owner_id===e)){let e={id:`msg-${r.id}`,type:"new_message",title:"Новое сообщение",message:r.text.length>50?`${r.text.substring(0,50)}...`:r.text,chatId:r.chat_id,petName:t.pets?.name,timestamp:r.created_at};s(t=>[e,...t.filter(e=>!("new_message"===e.type&&e.chatId===r.chat_id))].slice(0,5))}}}).subscribe()},[e]),(0,i.useCallback)(async()=>{if(!n.O||!e)return;let t=o();if(d()!==t)try{let r=new Date;r.setDate(r.getDate()-1);let{data:i}=await n.O.from("messages").select(`
          id,
          chat_id,
          created_at,
          chats!inner(
            id,
            user_id,
            owner_id,
            pets!inner(
              name,
              type
            )
          )
        `).gte("created_at",r.toISOString()).neq("sender_id",e).or(`chats.user_id.eq.${e},chats.owner_id.eq.${e}`);if(i&&i.length>0){let e=new Set(i.map(e=>e.chat_id)),r={id:`daily-${t}`,type:"daily_summary",title:"Новые сообщения за день",message:`У вас ${i.length} новых сообщений в ${e.size} чатах`,timestamp:new Date().toISOString()};s(e=>{let t=e.filter(e=>"daily_summary"!==e.type);return[r,...t].slice(0,5)})}c(t)}catch(e){console.error("Ошибка при проверке ежедневных уведомлений:",e)}},[e]),{notifications:r,removeNotification:(0,i.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),clearAllNotifications:(0,i.useCallback)(()=>{s([])},[])}}({userId:e?.user?.id,isOnline:r});return e?.user?.id?s.jsx(d,{notifications:o,onClose:u,onChatClick:e=>{t.push(`/chats?chatId=${e}`)}}):null}},99636:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>i});var s=r(97247);function i({children:e}){return s.jsx(s.Fragment,{children:e})}},30049:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(28964);r(92448);let i={initialDelay:1e4,interval:864e5,maxRetries:3,retryDelay:3e4};function a({config:e=i,enableLogging:t=!1}={}){let[r,a]=(0,s.useState)(null),[n,l]=(0,s.useState)(0),[o,d]=(0,s.useState)(!1);return null}},88964:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var s=r(97247);r(28964);var i=r(87972),a=r(25008);let n=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return s.jsx("div",{className:(0,a.cn)(n({variant:t}),e),...r})}},58053:(e,t,r)=>{"use strict";r.d(t,{d:()=>o,z:()=>d});var s=r(97247),i=r(28964),a=r(69008),n=r(87972),l=r(25008);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...n},d)=>{let c=i?a.g7:"button";return s.jsx(c,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},59827:(e,t,r)=>{"use strict";r.d(t,{UserEmailIndicator:()=>d});var s=r(97247),i=r(34178),a=r(58053),n=r(38146),l=r(92448),o=r(88964);function d(){(0,i.usePathname)();let e=(0,i.useRouter)(),{user:t,loading:r,isAuthenticated:d}=(0,n.B)(),c=async()=>{if(l.O)try{await l.O.auth.signOut(),e.refresh(),e.push("/")}catch(e){console.error("Error signing out:",e)}};if(r)return s.jsx("div",{className:"text-sm text-gray-500",children:"Загрузка..."});if(d&&t){let r="agentgl007@gmail.com"===t.email;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(a.z,{variant:"outline",size:"sm",onClick:()=>e.push("/chats"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"\uD83D\uDCAC Чаты"}),s.jsx(a.z,{variant:"outline",size:"sm",onClick:()=>e.push("/cabinet"),className:"text-green-600 border-green-200 hover:bg-green-50",children:"\uD83C\uDFE0 Кабинет"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-lg font-semibold text-amber-700",children:t.user_metadata?.name||t.email}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(o.C,{variant:r?"default":"secondary",className:"text-xs",children:r?"Админ":"Пользователь"}),s.jsx(o.C,{variant:t.email_confirmed_at?"default":"destructive",className:"text-xs",children:t.email_confirmed_at?"Подтвержден":"Не подтвержден"})]})]}),s.jsx(a.z,{variant:"outline",size:"sm",onClick:c,children:"Выйти"})]})}return s.jsx(a.z,{className:"bg-orange-500 hover:bg-orange-600",onClick:()=>e.push("/auth"),children:"Войти / Регистрация"})}},38146:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});var s=r(28964);function i(){let[e,t]=(0,s.useState)(null),[r,i]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0);return{session:e,user:r,loading:a,isAuthenticated:!!r}}r(92448)},92448:(e,t,r)=>{"use strict";r.d(t,{O:()=>a,e:()=>n});var s=r(24354);let i="https://erjszhoaxapnkluezwpy.supabase.co",a=i.includes("placeholder")?null:(0,s.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyanN6aG9heGFwbmtsdWV6d3B5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTg2MjUsImV4cCI6MjA3MTk3NDYyNX0.IvgGGZDzq-7YJZAGWBeqcyR5BL1fc6zBrhMa1qiE5Rs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"Content-Type":"application/json; charset=utf-8"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),n=a||{from:()=>({select:()=>({eq:()=>({order:()=>Promise.resolve({data:null,error:Error("Supabase not configured")}),single:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})}),insert:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})}),update:()=>({eq:()=>({select:()=>Promise.resolve({data:null,error:Error("Supabase not configured")})})})}),storage:{from:()=>({upload:()=>Promise.resolve({data:null,error:Error("Supabase Storage not configured")}),getPublicUrl:()=>({data:{publicUrl:"/placeholder.svg"}})})}}},25008:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(61929),i=r(35770);function a(...e){return(0,i.m6)((0,s.W)(e))}},13973:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h,metadata:()=>m});var s=r(72051);r(67272);var i=r(45347);let a=(0,i.createProxy)(String.raw`D:\DATA\Hvastik-Alert\components\user-email-indicator.tsx#UserEmailIndicator`),n=(0,i.createProxy)(String.raw`D:\DATA\Hvastik-Alert\components\supabase-keep-alive.tsx#default`),l=(0,i.createProxy)(String.raw`D:\DATA\Hvastik-Alert\components\providers.tsx#Providers`);var o=r(92349),d=r(15581);function c(){return(0,s.jsxs)(o.default,{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-all duration-300 hover:scale-105",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(d.Z,{className:"h-8 w-8 text-orange-500"}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-400 rounded-full animate-pulse"})]}),(0,s.jsxs)("div",{className:"hidden sm:block",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Хвостик Alert"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:"Анапа - поиск питомцев"})]})]})}let u=(0,i.createProxy)(String.raw`D:\DATA\Hvastik-Alert\components\notification-provider.tsx#NotificationProvider`),m={title:"v0 App",description:"Created with v0",generator:"v0.dev"};function h({children:e}){return s.jsx("html",{lang:"ru",children:s.jsx("body",{className:"min-h-screen bg-background font-sans antialiased",children:(0,s.jsxs)(l,{children:[s.jsx("header",{className:"w-full bg-white/95 backdrop-blur-sm shadow-sm border-b sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[s.jsx(c,{}),s.jsx(a,{})]})}),e,s.jsx(n,{config:{initialDelay:5e3,interval:864e5,maxRetries:3,retryDelay:1e4}}),s.jsx(u,{})]})})})}},68199:(e,t,r)=>{"use strict";function s(){return null}r.r(t),r.d(t,{default:()=>s})},67272:()=>{}};